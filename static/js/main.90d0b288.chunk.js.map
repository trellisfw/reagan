{"version":3,"sources":["config/dev-cert/signed_software_statement.js","config/dev-cert/unsigned_software_statement.js","overmind/app/actions.js","overmind/app/index.js","overmind/app/onInitialize.js","overmind/app/state.js","config/config.js","config/index.js","overmind/oada/state.js","overmind/oada/actions.js","overmind/oada/websocket.js","overmind/oada/effects.js","overmind/oada/index.js","overmind/oada/onInitialize.js","overmind/view/state.js","overmind/view/index.js","overmind/view/actions.js","overmind/login/index.js","overmind/login/state.js","overmind/login/actions.js","overmind/index.js","view/TopBar/index.js","view/Content/CoI/Producer.js","view/Content/CoI/Holder.js","view/Content/CoI/Policies.js","view/Content/CoI/index.js","view/Content/Audit/Organization.js","view/Content/Audit/Scope.js","view/Content/Audit/Score.js","view/Content/Audit/Validity.js","view/Content/Audit/index.js","view/Content/PDF/index.js","view/Content/index.js","view/Modals/VerifiedModal/Header.js","view/Modals/VerifiedModal/Audit/OrgLocation.js","view/Modals/VerifiedModal/Audit/ScopeLocation.js","view/Modals/VerifiedModal/Audit/index.js","view/Modals/VerifiedModal/CoI/Location.js","view/Modals/VerifiedModal/CoI/index.js","view/Modals/VerifiedModal/Content.js","view/Modals/VerifiedModal/index.js","Login/index.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","toggleShowData","state","app","showData","processURL","actions","queryString","parse","window","location","search","maskStr","maskedResourceURL","trellisMask","JSON","Array","isArray","url","original","originalVdoc","URL","origin","pathname","login","domainChange","value","masklink","verifyRemoteResource","token","oada","verifyIntegrity","verifyRemote","mask","response","_","clone","get","_meta","_id","error","data","match","resourceId","resourcePath","length","view","Modals","VerifiedModal","open","errorMessage","finished","onInitialize","a","async","effects","console","log","packagejson","version","document","title","valid","unchanged","_actions","config","devcert","require","redirect","redirect_uris","merge","documents","getAccessToken","Promise","promisify","oadaIdClient","lsKey","logout","websocket","close","localStorage","try","replace","metadata","scope","then","res","access_token","catch","err","connect","result","uploadFile","file","request","method","baseURL","headers","Authorization","type","id","split","put","filename","name","createAndPostResource","pdf","_rev","onDocumentsChange","keys","filter","Object","key","startsWith","map","documentId","loadDocument","forEach","orgData","Error","orgMeta","pick","audits","auditKey","orgAudit","cois","coiKey","orgCoi","contentType","createResource","post","createAndPostResourceHTTP","createResourceHTTP","postHTTP","createAndPutResource","doesResourceExist","head","status","http","watch","actionName","action","urlLib","uuid","warnings","myWebsocket","instance","_state","socket","messages","connected","httpCallbacks","watchCallbacks","sendMessages","message","send","stringify","resolve","reject","WebSocket","onopen","event","onclose","onmessage","requestId","statusText","originalStack","requestStack","callback","urlObj","toLowerCase","path","entries","reduce","b","push","unwatch","ws","Pages","selectedPage","Data","openFileBrowser","uploading","TopBar","documentKey","domain","loading","loggedIn","me","username","namespaced","createHook","overmind","skin","css","display","flexDirection","justifyContent","alignItems","backgroundColor","minHeight","borderBottom","height","paddingLeft","src","alt","marginRight","Dropdown","text","Menu","Item","icon","onClick","Producer","props","coi","producer","Table","Row","Cell","collapsing","fontWeight","Holder","holder","Scope","policies","cloneDeep","p","start","moment","effective_date","end","expire_date","isValid","now","expired","isAfter","isBefore","idx","Popup","content","textAlign","format","trigger","Chip","color","label","number","CoI","celled","striped","maxWidth","Body","fontSize","Policies","Organization","audit","org","organization","products_observed","Score","score","final","rating","style","trim","Validity","validity","certificate_validity_period","Audit","PDF","httpHeaders","onLoadSuccess","numPages","className","pageNumber","width","Content","doc","jsonData","_type","flex","boxShadow","padding","collapsed","collapseStringsAfterLength","displayDataTypes","displayObjectSize","enableClipboard","Button","MyHeader","myActions","Header","Icon","Location","street_address","city","postal_code","country","address","definition","OrgLocation","ScopeLocation","myState","jsonTitle","marginBottom","Modal","onClose","Login","paddingBottom","App","Boolean","hostname","createOvermind","devtools","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.90d0b288.chunk.js","sourcesContent":["module.exports = \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImRldjEiLCJqd2siOnsia3R5IjoiUlNBIiwibiI6InJyMzhpSzhGaTBfLUNSTFR2Vks0SUlDbGFyaWk2d1ZIcEU3elpQWG9FUmxfT29oNjRZbWJRY1JhNWVGdzBVUWhVdkVDaEt1OU5vM2ptN0xXOVpjTDFIS3Joa1VXLU9Rb2JPWFVuckNnb0NwYThWWWhfd1JJZFFZYnN2UFFWajVOR3V1TlhhWkJfX3B4Rnktbl9PMklNUzhPR3Jlem0zYlFIREFmLWpuZ0loWkdaZ0xhdkxKeVNIVXlEUUw0RmJRNkQzUXozQU1PcnhGdmE0S0JJUENRS0ZPbVlYVm40enRnVDY4aGd5TW9jMUt5dHhvUmd6VkhuQ2RUcFBXV1Zybk1GY0plZFlELUxtazBYbzVyallPeG1xOEExZWpmeFBNZVJfM1Y3OEFKazJMREk0dkdhSjNmbmFQWlM3Q3ZXOEYzcFdXaWpfQnlWR0NJLTVCcmtxSF9uUSIsImUiOiJBUUFCIn19.eyJyZWRpcmVjdF91cmlzIjpbImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9vYXV0aDIvcmVkaXJlY3QuaHRtbCIsImh0dHBzOi8vdHJlbGxpc2Z3LmdpdGh1Yi5pby9jb25kdWN0b3Ivb2F1dGgyL3JlZGlyZWN0Lmh0bWwiXSwidG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2QiOiJ1cm46aWV0ZjpwYXJhbXM6b2F1dGg6Y2xpZW50LWFzc2VydGlvbi10eXBlOmp3dC1iZWFyZXIiLCJncmFudF90eXBlcyI6WyJhdXRob3JpemF0aW9uX2NvZGUiXSwicmVzcG9uc2VfdHlwZXMiOlsidG9rZW4iLCJjb2RlIiwiaWRfdG9rZW4iLCJpZF90b2tlbiB0b2tlbiIsImNvZGUgaWRfdG9rZW4iLCJjb2RlIHRva2VuIiwiY29kZSBpZF90b2tlbiB0b2tlbiJdLCJjbGllbnRfbmFtZSI6IlRyZWxsaXMgLSBPcGVuIFNvdXJjZSIsImNsaWVudF91cmkiOiJodHRwczovL2dpdGh1Yi5jb20vdHJlbGxpc2Z3IiwiY29udGFjdHMiOlsiQWFyb24gQXVsdCA8YXVsdGFjQHB1cmR1ZS5lZHU-Il0sImp3a3MiOnsia2V5cyI6W3sia3R5IjoiUlNBIiwibiI6InZ3dzFLcjNIVTk1MHBKTDhOeXh0MVZZN0ZIZTN6eHpSZ1VrZE1udDNCUzZGZ3h5cHZXR29YTWE5UFpYUHcxX3hiUVc1cFdJVU91ZG1Kek1MRnRZMzlrUVFiSW9WdDF1WV9JdEI0NmdrNTIzS0FRVktiQzQtVFgyT25WSGRJLWswY1FlTmZIakl0c0RjZE4tUFhKVlMtNzBEMFlhMEQzV3lpVEhPaHNkWXpXQm1iYUVwbDVEbkRrY0dCbjA4RXBMdzFlWWE4ejlxSHRlNE1Wc01jczJpdjdmeDZ0TTJmbVBlNFB5WUF4ZVJYU0RTMVdKcndReUs5SnJHMVBfQVF1X0xFQ2V6aUp0ZVk2RVZ1aVczbGI1WDhZOW9xM3FwNWV4SkNWWVJ2c3NRVXc1Ti1XdjhENUlpeTdBNmJMLUhKUDFfOWJ5OThSWTh4LVhiSzR6X0VMUjNNUSIsImUiOiJBUUFCIiwia2lkIjoiOTRhYWJiM2FhMTkxNGVjOGE4Y2RhNDU1YTQ3M2NmMGQifV19LCJpYXQiOjE1ODI2OTM5OTR9.NWYV4bi4FAFS6xchooCuZ8yxcVAYeGsZ7Bx5gHnN42-uFLLdbexhYw9f6BMTzES1TAxlKokJxxrFV5mYEMaiJrxS5BbIhz_QOw3i4kNiveLEhq7ljLe-7ivosrHEKgAtWEIFLuqfMX5_f3Nojc3HoN5Ze_oP6FoV7-4Lt2-i3yeaHR_d6u1EzrUWX8TFfqUv7Yu4mSrSLgwOIeUoT8drmBmcZCHPS3RykhWgAq4SUXyXetNx-u_SbP3R8VPk3bJXtVH6q7qzA9kQu0Jy-Gl6ah2ZqH8g2QSUY9rQSa7cGSEBOgFhtjZF9TR4tJ34RYR6vELtcgyG8DGODX5VySpr4Q\";","module.exports = {\n  \"redirect_uris\": [\n    \"http://localhost:3000/oauth2/redirect.html\",\n    \"https://trellisfw.github.io/conductor/oauth2/redirect.html\",\n  ],\n  \"token_endpoint_auth_method\": \"urn:ietf:params:oauth:client-assertion-type:jwt-bearer\",\n  \"grant_types\": [\n    \"authorization_code\"\n  ],\n  \"response_types\": [\n    \"token\",\n    \"code\",\n    \"id_token\",\n    \"id_token token\",\n    \"code id_token\",\n    \"code token\",\n    \"code id_token token\"\n  ],\n  \"client_name\": \"Trellis - Open Source\",\n  \"client_uri\": \"https://github.com/trellisfw\",\n  \"contacts\": [\n    \"Aaron Ault <aultac@purdue.edu>\"\n  ],\n  // THERE IS NOTHING PRIVATE ABOUT THIS DEV CERT: IT IS IN GITHUB.  OVERRIDE WITH YOUR OWN FOR PRODUCTION\n  \"jwks\": {\n    \"keys\": [\n      {\"kty\":\"RSA\",\"n\":\"vww1Kr3HU950pJL8Nyxt1VY7FHe3zxzRgUkdMnt3BS6FgxypvWGoXMa9PZXPw1_xbQW5pWIUOudmJzMLFtY39kQQbIoVt1uY_ItB46gk523KAQVKbC4-TX2OnVHdI-k0cQeNfHjItsDcdN-PXJVS-70D0Ya0D3WyiTHOhsdYzWBmbaEpl5DnDkcGBn08EpLw1eYa8z9qHte4MVsMcs2iv7fx6tM2fmPe4PyYAxeRXSDS1WJrwQyK9JrG1P_AQu_LECeziJteY6EVuiW3lb5X8Y9oq3qp5exJCVYRvssQUw5N-Wv8D5Iiy7A6bL-HJP1_9by98RY8x-XbK4z_ELR3MQ\",\"e\":\"AQAB\",\"kid\":\"94aabb3aa1914ec8a8cda455a473cf0d\"}\n    ]\n  }\n}\n","import _ from 'lodash';\nimport Promise from 'bluebird';\nimport queryString from 'query-string'\nimport masklink from '@trellisfw/masklink'\n\nexport default {\n  toggleShowData({ state }) {\n    state.app.showData = !state.app.showData;\n  },\n  async processURL({ state, actions }) {\n    // Populate domain from url if there is one\n    // Parse query parameters\n    const { 'trellis-mask': maskStr, 'masked-resource-url': maskedResourceURL } = queryString.parse(window.location.search)\n    const trellisMask = JSON.parse((Array.isArray(maskStr) ? maskStr[0] : maskStr) || '{}');\n\n    let url = null;\n    if (maskedResourceURL) {\n      url = maskedResourceURL;\n    } else if (trellisMask && trellisMask.url) {\n      url = trellisMask.url;\n    }\n\n    if (url) {\n      //Save trellisMask, or maskedResourceURL\n      state.app.trellisMask = null;\n      state.app.maskedResourceURL = null;\n      state.app.trellisMask = trellisMask;\n      state.app.maskedResourceURL = maskedResourceURL;\n      //Clear data\n      state.app.original = null;\n      state.app.originalVdoc = null;\n\n      //Extract host\n      const { origin, pathname } = new URL(url)\n      //Set host\n      actions.login.domainChange({ value: origin })\n      //Auto-login (connecting via. websocket to oada)\n      await actions.login.login()\n      //Verify using masklink\n      if (maskedResourceURL) state.app.verifyIntegrity = await masklink.verifyRemoteResource({url, token: state.oada.token});\n      if (maskStr) state.app.verifyIntegrity = await masklink.verifyRemote({mask: trellisMask, token: state.oada.token});\n      const verifyIntegrity = state.app.verifyIntegrity;\n\n      try {\n        let response = null;\n        if (maskedResourceURL) {\n          /*\n            state.app.verifyIntegrity.original has the reconstructed data we want to show (full audit/coi).\n            Need to get ._meta/vdoc/id to get the masked vdoc id for the data\n            Then get /unmask of that vdoc to get the original vdoc\n            Then get /pdf of the original vdoc\n          */\n          state.app.original = _.clone(verifyIntegrity.original);\n          //Get the id of the masked vdoc\n          /*response = await actions.oada.get(`${verifyIntegrity.original._id}/_meta/vdoc/_id`)\n          if (response.error) throw response.error;\n          const maskedVdocId = response.data;\n          //Get the original vdoc\n          response = await actions.oada.get(`${maskedVdocId}/unmask`)\n          if (response.error) throw response.error;\n          const originalVdoc = response.data;\n          //Save the original vdoc\n          state.app.originalVdoc = originalVdoc;*/\n\n          response = await actions.oada.get(`${verifyIntegrity.original._meta._id}/vdoc`)\n          if (response.error) throw response.error;\n          const originalVdoc = response.data;\n          //Save the original vdoc\n          state.app.originalVdoc = originalVdoc;\n        } else {\n          /*\n            state.app.verifyIntegrity.original contains just the data we want to show in the modal (subset of audit/coi)\n            Need to use resource id from url which points to the original audit/coi to get the original's data (original)\n            Then get the vdoc of the original\n          */\n          //Extract the resourceId from the url given in the query parameter\n          const match = pathname.match(/(\\/resources\\/[^\\/]*)\\/?(.*)/i);\n          let resourceId = null;\n          let resourcePath = null; //Path inside the resource\n          if (match) {\n            resourceId = match[1];\n            if (match[2].length > 0) resourcePath = match[2];\n          }\n          state.app.resourcePath = resourcePath; //Not sure why we need this\n          //Get the original (coi/audit unmasked) (not the subset `resourcePath`)\n          response = await actions.oada.get(`${resourceId}`)\n          if (response.error) throw response.error\n          state.app.original = response.data\n          /*//Get the vdoc of the original audit/coi\n          response = await actions.oada.get(`${resourceId}/_meta/vdoc/_id`)\n          if (response.error) throw response.error\n          const originalVdocId = response.data\n          //Get the original vdoc\n          response = await actions.oada.get(`${originalVdocId}`)\n          if (response.error) throw response.error\n          const originalVdoc = response.data\n          //Save the original vdoc\n          state.app.originalVdoc = originalVdoc;*/\n          \n          //Get originals's meta's vdoc\n          response = await actions.oada.get(`${state.app.original._meta._id}/vdoc`)\n          if (response.error) throw response.error;\n          const originalVdoc = response.data;\n          //Save the original vdoc\n          state.app.originalVdoc = originalVdoc;\n        }\n        //Open Verified Modal if there is a resourcePath\n        if (state.app.resourcePath) state.view.Modals.VerifiedModal.open = true;\n      } catch (err) {\n        if (!err.response) throw err; //Unknown error\n        if (_.get(err, 'response.status') == 403) {\n          state.app.errorMessage = \"You do not have access to the original data.\";\n        } else if (_.get(err, 'response.status') == 404) {\n          state.app.errorMessage = \"The original no longer exists at this location.\";\n        } else {\n          state.app.errorMessage = \"Opps! A unknown error occured.\";\n        }\n        state.app.error = true;\n      }\n    } else {\n      state.app.errorMessage = \"Oops! A valid link must be provided to application.\"\n      state.app.error = true;\n    }\n    state.app.finished = true;\n  }\n}\n","import _state from './state'\nimport _actions from './actions'\nimport _onInitialize from './onInitialize'\n\nexport const onInitialize = _onInitialize;\nexport const state = _state;\nexport const actions = _actions;\n","import packagejson from '../../../package.json';\n\nexport default async function ({ state, actions, effects }) {\n  console.log('Started app')\n  // Add the package.json version to the title\n  if (packagejson && packagejson.version) {\n    document.title = document.title + ' - v'+packagejson.version;\n  }\n  await actions.app.processURL();\n}\n","import { hashJSON } from '@trellisfw/signatures'\nimport _ from 'lodash';\n\nexport default {\n  showData: false,\n  finished: false,\n  trellisMask: null,\n  maskedResourceURL: null,\n  verifyIntegrity: {},\n  original: null,\n  originalVdoc: null,\n  valid: ({ maskedResourceURL, trellisMask, verifyIntegrity }, state) => {\n    if (maskedResourceURL) {\n      if (verifyIntegrity.match && verifyIntegrity.unchanged) return true;\n    } else {\n      if (verifyIntegrity.match == true) return true;\n    }\n    return false;\n  }\n}\n","import _ from 'lodash';\n\nconst config = {\n  oada: {\n    url: 'https://stage.smithfield.trellis.one',\n    devcert: require('./dev-cert/signed_software_statement'), // Don't use this public one in production unless implicit flow is OK for you\n    redirect: require('./dev-cert/unsigned_software_statement').redirect_uris[process.env.NODE_ENV === 'production' ? 1 : 0], // 0 is localhost:3000, 1 is trellisfw.github.io/conductor\n  }\n};\n\nexport default config;\n","import _ from 'lodash';\nimport config from './config';\nconst configDev = (process.env.NODE_ENV == 'development') ? require('./config.dev.js').default : null;\n\nexport default _.merge({}, config, configDev);\n","import config from '../../config';\n\nexport default {\n  url: config.oada.url,\n  token: '',\n  data: {\n    documents: {}\n  }\n}\n","import _ from 'lodash'\nimport Promise from 'bluebird'\nimport request from 'axios'\nimport config from '../../config'\nimport { browser as oadaIdClient } from '@oada/oada-id-client/index.js'\n\nconst getAccessToken = Promise.promisify(oadaIdClient.getAccessToken)\n\nconst lsKey = url => 'oada:' + url + ':token' // handy function to make a useful localStorage key\n\nexport default {\n  async logout ({ state, effects }) {\n    await effects.oada.websocket.close()\n    //Clear documents\n    state.oada.data.documents = {}\n    delete window.localStorage[lsKey(state.oada.url)]\n  },\n  login ({ state, actions }) {\n    /*\n      Connect to my OADA instance\n    */\n    return Promise.try(() => {\n      if (window.localStorage[lsKey(state.oada.url)]) {\n        console.log(\n          'Already have a token for URL ' + state.oada.url + ', logout to clear'\n        )\n        return window.localStorage[lsKey(state.oada.url)]\n      }\n      // If we don't have a token stored from last time, we'll need to\n      // redirect browser to ask for one\n      console.log('Do not have an access token, redirecting...')\n      return getAccessToken(state.oada.url.replace(/^https?:\\/\\//, ''), {\n        metadata: config.oada.devcert,\n        scope: 'all:all',\n        redirect: config.oada.redirect\n      })\n        .then(res => res.access_token)\n        .catch(err => {\n          state.login.error =\n            'Failed to redirect to ' + state.oada.url + ' for connection'\n          console.log('FAILED TO GET ACCESS TOKEN: err = ', err)\n          return false\n        })\n      // Have a token now, make sure it's saved to localStorage until we logout:\n    })\n      .then(token => {\n        if (token) window.localStorage[lsKey(state.oada.url)] = token\n        state.oada.token = token\n        console.log('Have token, connecting to oada...')\n        return actions.oada.connect()\n      })\n      .then(result => {\n        console.log('Websocket connected.')\n      })\n  },\n  uploadFile ({ state, actions }, file) {\n    //Add file to the file list, flag it as `uploading`\n    //Create the pdf\n    return request\n      .request({\n        url: '/resources',\n        method: 'post',\n        baseURL: state.oada.url,\n        headers: {\n          Authorization: 'Bearer ' + state.oada.token,\n          'Content-Disposition': 'inline',\n          'Content-Type': file.type\n        },\n        data: file\n      })\n      .then(response => {\n        //Pull out location of pdf and link it to the document under the 'pdf' key\n        var id = response.headers['content-location'].split('/')\n        id = id[id.length - 1]\n        //Add filename info to the pdf\n        return actions.oada\n          .put({\n            url: `/resources/${id}/_meta`,\n            data: {\n              filename: file.name\n            },\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          })\n          .then(() => {\n            //Create a document with a `pdf` key linking the pdf, and link the document to `documents`\n            return actions.oada.createAndPostResource({\n              url: '/bookmarks/trellisfw/documents',\n              data: {\n                pdf: {\n                  _id: 'resources/' + id,\n                  _rev: 0\n                }\n              }\n            })\n          })\n      })\n  },\n  onDocumentsChange ({ state, actions }, response) {\n    //If a key was added or changed reload that document\n    console.log('onDocumentsChange', response)\n    //Check if change was a merge\n    if (_.get(response, 'change.type') == 'merge') {\n      //Get all the keys that do not start with _\n      let keys = _.filter(\n        Object.keys(_.get(response, 'change.body')),\n        key => _.startsWith(key, '_') === false\n      )\n      //If these keys are links, then load them as documents\n      return Promise.map(keys, documentId => {\n        return actions.oada.loadDocument(documentId)\n      })\n    } else if (_.get(response, 'change.type') == 'delete') {\n      //Get all the keys that do not start with _\n      let keys = _.filter(\n        Object.keys(_.get(response, 'change.body')),\n        key => _.startsWith(key, '_') === false\n      )\n      //If these keys are links, then load them as documents\n      _.forEach(keys, key => {\n        delete state.oada.data.documents[key]\n      })\n    }\n  },\n  loadDocument ({ state, actions }, documentId) {\n    return actions.oada\n      .get('/bookmarks/trellisfw/documents/' + documentId)\n      .then(response => {\n        //If doc already exists merge in data\n        const orgData = state.oada.data.documents[documentId] || {}\n        state.oada.data.documents[documentId] = _.merge(\n          {},\n          orgData,\n          response.data\n        )\n        //Load the _meta for this document\n        return actions.oada\n          .get(`/bookmarks/trellisfw/documents/${documentId}/_meta`)\n          .then(response => {\n            if (response == null) throw Error('No data')\n            const orgMeta = state.oada.data.documents[documentId]._meta\n            //Merge in status and services\n            state.oada.data.documents[documentId]._meta = _.merge(\n              {},\n              orgMeta,\n              _.pick(response.data, ['stats', 'services'])\n            )\n          })\n          .catch(err => {\n            console.log('Error. Failed to load document _meta', documentId)\n          })\n          .then(() => {\n            //Load the meta for the pdf of this doc\n            if (state.oada.data.documents[documentId].pdf != null) {\n              return actions.oada\n                .get(`/bookmarks/trellisfw/documents/${documentId}/pdf/_meta`)\n                .then(response => {\n                  if (response == null) throw Error('No data')\n                  const orgMeta =\n                    state.oada.data.documents[documentId].pdf._meta || {}\n                  state.oada.data.documents[documentId].pdf._meta = _.merge(\n                    {},\n                    orgMeta,\n                    _.pick(response.data, ['filename'])\n                  )\n                })\n                .catch(err => {\n                  console.log('Error. Failed to load pdf _meta', documentId)\n                })\n            }\n          })\n          .then(() => {\n            //Load the audit info for this document if it exists\n            if (state.oada.data.documents[documentId].audits != null) {\n              return Promise.map(\n                _.keys(state.oada.data.documents[documentId].audits),\n                auditKey => {\n                  return actions.oada\n                    .get(\n                      `/bookmarks/trellisfw/documents/${documentId}/audits/${auditKey}`\n                    )\n                    .then(response => {\n                      if (response == null) throw Error('No data')\n                      const orgAudit =\n                        state.oada.data.documents[documentId].audits[\n                          auditKey\n                        ] || {}\n                      state.oada.data.documents[documentId].audits[\n                        auditKey\n                      ] = _.merge({}, orgAudit, response.data)\n                    })\n                    .catch(err => {\n                      console.log(\n                        'Error. Failed to load audit ',\n                        auditKey,\n                        'from doc',\n                        documentId\n                      )\n                    })\n                }\n              )\n            }\n          })\n          .then(() => {\n            //Load the masked audit info for this document if it exists\n            if (\n              state.oada.data.documents[documentId]['audits-masked'] != null\n            ) {\n              return Promise.map(\n                _.keys(state.oada.data.documents[documentId]['audits-masked']),\n                auditKey => {\n                  return actions.oada\n                    .get(\n                      `/bookmarks/trellisfw/documents/${documentId}/audits-masked/${auditKey}`\n                    )\n                    .then(response => {\n                      if (response == null) throw Error('No data')\n                      const orgAudit =\n                        state.oada.data.documents[documentId]['audits-masked'][\n                          auditKey\n                        ] || {}\n                      state.oada.data.documents[documentId]['audits-masked'][\n                        auditKey\n                      ] = _.merge({}, orgAudit, response.data)\n                    })\n                    .catch(err => {\n                      console.log(\n                        'Error. Failed to load audit ',\n                        auditKey,\n                        'from doc',\n                        documentId\n                      )\n                    })\n                }\n              )\n            }\n          })\n          .then(() => {\n            //Load the cois info for this document if it exists\n            if (state.oada.data.documents[documentId].cois != null) {\n              return Promise.map(\n                _.keys(state.oada.data.documents[documentId].cois),\n                coiKey => {\n                  return actions.oada\n                    .get(\n                      `/bookmarks/trellisfw/documents/${documentId}/cois/${coiKey}`\n                    )\n                    .then(response => {\n                      if (response == null) throw Error('No data')\n                      const orgCoi =\n                        state.oada.data.documents[documentId].cois[coiKey] || {}\n                      state.oada.data.documents[documentId].cois[\n                        coiKey\n                      ] = _.merge({}, orgCoi, response.data)\n                    })\n                    .catch(err => {\n                      console.log(\n                        'Error. Failed to load coi ',\n                        coiKey,\n                        'from doc',\n                        documentId\n                      )\n                    })\n                }\n              )\n            }\n          })\n      })\n      .catch(err => {\n        console.log('Error. Failed to load document', documentId, err)\n      })\n  },\n  createAndPostResource ({ actions }, { url, data, contentType }) {\n    return actions.oada.createResource({ data, contentType }).then(response => {\n      //Link this new resource at the url provided\n      var id = response.headers['content-location'].split('/')\n      id = id[id.length - 1]\n      return actions.oada\n        .post({\n          url: url,\n          headers: {\n            'Content-Type': contentType || 'application/json'\n          },\n          data: {\n            _id: 'resources/' + id,\n            _rev: 0\n          }\n        })\n        .then(response => {\n          var id = response.headers['content-location'].split('/')\n          id = id[id.length - 1]\n          return id\n        })\n    })\n  },\n  createAndPostResourceHTTP ({ actions }, { url, data, contentType }) {\n    return actions.oada\n      .createResourceHTTP({ data, contentType })\n      .then(response => {\n        //Link this new resource at the url provided\n        var id = response.headers['content-location'].split('/')\n        id = id[id.length - 1]\n        return actions.oada\n          .postHTTP({\n            url: url,\n            headers: {\n              'Content-Type': contentType || 'application/json'\n            },\n            data: {\n              _id: 'resources/' + id,\n              _rev: 0\n            }\n          })\n          .then(response => {\n            var id = response.headers['content-location'].split('/')\n            id = id[id.length - 1]\n            return id\n          })\n      })\n  },\n  createAndPutResource ({ actions }, { url, data, contentType }) {\n    return actions.oada.createResource({ data, contentType }).then(response => {\n      //Link this new resource at the url provided\n      var id = response.headers['content-location'].split('/')\n      id = id[id.length - 1]\n      return actions.oada.put({\n        url,\n        headers: {\n          'Content-Type': contentType || 'application/json'\n        },\n        data: {\n          _id: 'resources/' + id,\n          _rev: 0\n        }\n      })\n    })\n  },\n  createResource ({ actions }, { data, contentType }) {\n    var headers = {}\n    headers['content-type'] = contentType || 'application/json'\n    return actions.oada.post({ url: '/resources', data, headers })\n  },\n  createResourceHTTP ({ actions }, { data, contentType }) {\n    var headers = {}\n    headers['content-type'] = contentType || 'application/json'\n    return actions.oada.postHTTP({ url: '/resources', data, headers })\n  },\n  doesResourceExist ({ actions }, url) {\n    return actions.oada\n      .head(url)\n      .then(response => {\n        if (response != null) return true\n        return false\n      })\n      .catch(error => {\n        if (error.response && error.response.status === 404) return false\n        throw error\n      })\n  },\n  connect ({ state, effects }) {\n    return effects.oada.websocket.connect(state.oada.url)\n  },\n  get ({ effects, state }, url) {\n    return effects.oada.websocket.http({\n      method: 'GET',\n      url: url,\n      headers: {\n        Authorization: 'Bearer ' + state.oada.token\n      }\n    })\n  },\n  head ({ effects, state }, url) {\n    return effects.oada.websocket.http({\n      method: 'HEAD',\n      url: url,\n      headers: {\n        Authorization: 'Bearer ' + state.oada.token\n      }\n    })\n  },\n  post ({ effects, state }, { url, headers, data }) {\n    console.log('Posting to url ', url)\n    return effects.oada.websocket.http({\n      method: 'POST',\n      url: url,\n      headers: _.merge(\n        {\n          Authorization: 'Bearer ' + state.oada.token\n        },\n        headers\n      ),\n      data: data\n    })\n  },\n  postHTTP ({ effects, state }, { url, headers, data }) {\n    return request.request({\n      url: url,\n      method: 'post',\n      baseURL: state.oada.url,\n      headers: _.merge(\n        {\n          Authorization: 'Bearer ' + state.oada.token\n        },\n        headers\n      ),\n      data: data\n    })\n  },\n  put ({ effects, state }, { url, headers, data }) {\n    return effects.oada.websocket.http({\n      method: 'PUT',\n      url: url,\n      headers: _.merge(\n        {\n          Authorization: 'Bearer ' + state.oada.token\n        },\n        headers\n      ),\n      data: data\n    })\n  },\n  watch ({ effects, actions, state }, { url, actionName }) {\n    var cb = function callback (data) {\n      var action = _.get(actions, actionName)\n      action(data)\n    }\n    return effects.oada.websocket.watch(\n      {\n        url,\n        headers: { Authorization: 'Bearer ' + state.oada.token }\n      },\n      cb\n    )\n  }\n}\n","const Promise = require('bluebird');\nconst urlLib = require('url');\nconst uuid = require('uuid/v4');\nPromise.config({warnings: false})\n\nexport default function websocket(url) {\n\t//Create the message queue\n\tvar messages = [];\n\t//Create the socket\n\turl = url.replace('https://', 'wss://').replace('http://', 'ws://');\n\tconsole.log('Creating WebSocket for', url);\n\tvar socket;\n\tvar connected = false;\n\tvar httpCallbacks = {};\n\tvar watchCallbacks = {};\n\n\tfunction sendMessages() {\n\t\tif (!connected) return;\n\t\tmessages.forEach((message) => {\n      socket.send(JSON.stringify(message));\n\t\t});\n\t\tmessages = [];\n\t}\n\treturn new Promise((resolve, reject) => {\n    console.log('Calling WebSocket(url)');\n    socket = new WebSocket(url);\n    socket.onopen = function(event) {\n\t\t\tconsole.log('We are connected via websocket')\n\t\t\tconnected = true;\n\t\t\tsendMessages();\n\t\t\tresolve(socket)\n\t\t}\n\t\tsocket.onclose = function(event) {\n      console.log('Websocket closed.');\n\t\t}\n    socket.onmessage = function(event) {\n      var response = JSON.parse(event.data);\n\t\t\t//Look for id in httpCallbacks\n\t\t\tif (response.requestId) {\n\t\t\t\tif (httpCallbacks[response.requestId]) {\n          //Resolve Promise\n\t\t\t\t\tif (response.status >= 200 && response.status < 300) {\n\t\t\t\t\t\thttpCallbacks[response.requestId].resolve(response);\n\t\t\t\t\t} else {\n            //Create error like axios\n\t\t\t\t\t\tlet err = new Error('Request failed with status code '+response.status);\n            err.request = httpCallbacks[response.requestId].request;\n\t\t\t\t\t\terr.response = {\n\t\t\t\t\t\t\tstatus: response.status,\n\t\t\t\t\t\t\tstatusText: response.statusText,\n\t\t\t\t\t\t\theaders: response.headers,\n\t\t\t\t\t\t\tdata: response.data\n            };\n            err.originalStack = httpCallbacks[response.requestId].request.requestStack;\n\t\t\t\t\t\thttpCallbacks[response.requestId].reject(err);\n\t\t\t\t\t}\n\t\t\t\t\tdelete httpCallbacks[response.requestId];\n        } else if (watchCallbacks[response.requestId]) {\n\t\t\t\t\tif (watchCallbacks[response.requestId].resolve) {\n\t\t\t\t\t\tif (response.status === 'success') {\n\t\t\t\t\t\t\t//Successfully setup websocket, resolve promise\n\t\t\t\t\t\t\twatchCallbacks[response.requestId].resolve(response);\n            } else {\n              //error(watchCallbacks[response.requestId].request, response);\n\t\t\t\t\t\t\tlet err = new Error('Request failed with status code '+response.status);\n\t\t\t\t\t\t\terr.response = response;\n              err.request = watchCallbacks[response.requestId].request;\n\t\t\t\t\t\t\twatchCallbacks[response.requestId].reject(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//Remove resolve and reject so we process change as a signal next time\n\t\t\t\t\t\tdelete watchCallbacks[response.requestId]['resolve'];\n\t\t\t\t\t\tdelete watchCallbacks[response.requestId]['reject'];\n          } else {\n            if (watchCallbacks[response.requestId].callback == null) throw new Error('The given watch function has an undefined callback:', watchCallbacks[response.requestId]);\n\t\t\t\t\t\twatchCallbacks[response.requestId].callback(response);\n\t\t\t\t\t}\n        }\n\t\t\t}\n\t\t}\n\t}).then(() => {\n\t\tconsole.log('Returning websocket obj')\n    function _http(request) {\n\t\t\t//Do a HTTP request\n      return new Promise((resolve, reject) => {\n        let urlObj = urlLib.parse(request.url);\n\t\t\t\tlet message = {\n\t\t\t\t\trequestId: uuid(),\n\t\t\t\t\tmethod: request.method.toLowerCase(),\n\t\t\t\t\tpath: urlObj.path,\n\t\t\t\t\tdata: request.data,\n\t\t\t\t\theaders: Object.entries(request.headers).map(([key, value]) => {\n\t\t\t\t\t\treturn {[key.toLowerCase()]: value}\n\t\t\t\t\t}).reduce((a,b) => {\n\t\t\t\t\t\treturn {...a, ...b}\n\t\t\t\t\t})\n\t\t\t\t};\n\t\t\t\tmessages.push(message);\n\t\t\t\thttpCallbacks[message.requestId] = {\n\t\t\t\t\trequest: request,\n\t\t\t\t\tresolve: resolve,\n\t\t\t\t\treject: reject,\n        };\n\t\t\t\tsendMessages();\n\t\t\t});\n    }\n\n    function _unwatch(request, callback) {\n\t\t\t//Unwatch for changes on requested resource and trigger provided signal\n\t\t\tlet urlObj = urlLib.parse(request.url);\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tlet message = {\n\t\t\t\t\trequestId: uuid(),\n\t\t\t\t\tmethod: 'unwatch',\n\t\t\t\t\tpath: urlObj.path,\n\t\t\t\t\theaders: Object.entries(request.headers).map(([key, value]) => {\n\t\t\t\t\t\treturn {[key.toLowerCase()]: value}\n\t\t\t\t\t}).reduce((a,b) => {\n\t\t\t\t\t\treturn {...a, ...b}\n\t\t\t\t\t})\n\t\t\t\t};\n        messages.push(message);\n        watchCallbacks[message.requestId] = {request, resolve, reject, callback};\n\t\t\t\tsendMessages();\n\t\t\t});\n\t\t}\n\n    function _watch(request, callback) {\n\t\t\t//Watch for changes on requested resource and trigger provided signal\n\t\t\tlet urlObj = urlLib.parse(request.url);\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tlet message = {\n\t\t\t\t\trequestId: uuid(),\n\t\t\t\t\tmethod: 'watch',\n\t\t\t\t\tpath: urlObj.path,\n\t\t\t\t\theaders: Object.entries(request.headers).map(([key, value]) => {\n\t\t\t\t\t\treturn {[key.toLowerCase()]: value}\n\t\t\t\t\t}).reduce((a,b) => {\n\t\t\t\t\t\treturn {...a, ...b}\n\t\t\t\t\t})\n\t\t\t\t};\n        messages.push(message);\n\t\t\t\twatchCallbacks[message.requestId] = {request, resolve, reject, callback};\n\t\t\t\tsendMessages();\n\t\t\t});\n\t\t}\n\n\t\tfunction _close() {\n\t\t\t//TODO reject all callbacks that have not resolved\n\t\t\t//Clear everything\n\t\t\tmessages = [];\n\t\t\thttpCallbacks = {};\n\t\t\twatchCallbacks = {};\n\t\t\t//Close socket\n\t\t\tsocket.close();\n\t\t}\n\n\t\treturn {\n\t\t\turl,\n\t\t\thttp: _http,\n\t\t\tclose: _close,\n\t\t\twatch: _watch,\n\t\t\tunwatch: _unwatch,\n\t\t}\n\t})\n}\n","import websocket from './websocket';\nimport _ from 'lodash'\nvar myWebsocket = null;\n\nexport default {\n  websocket: {\n    connect(url) {\n      //Connect to OADA with this url\n      return websocket(url).then((ws) => {\n        myWebsocket = ws;\n      })\n    },\n    watch(request, callback) {\n      return myWebsocket.watch(request, callback)\n    },\n    http(request) {\n      return myWebsocket.http(request).catch((err) => {\n        if (err.response && err.response.status) {\n          if (err.response.status == 404) {\n            console.log(\"HTTP 404\", _.get(err, 'response.headers.content-location'));\n            return {error: err}\n          } else if (err.response.status == 403) {\n            console.log(\"HTTP 403\", _.get(err, 'response.headers.content-location'));\n            return {error: err}\n          } else {\n            console.log('HTTP Error: ', err);\n            return {error: err}\n          }\n        } else {\n          console.log('HTTP Error', err)\n          return {error: err}\n        }\n      });\n    },\n    close() {\n      if (myWebsocket) {\n        console.log('Closing web socket...');\n        return myWebsocket.close();\n      }\n      console.log('WARNING: tried to close a null websocket!');\n    }\n  }\n}\n","import _state from './state'\nimport _actions from './actions'\nimport _onInitialize from './onInitialize'\nimport _effects from './effects'\n\nexport const onInitialize = _onInitialize;\nexport const state = _state;\nexport const actions = _actions;\nexport const effects = _effects;\n","import _ from 'lodash';\nimport Promise from 'bluebird';\n\nexport default function ({ state, actions, effects }, instance) {\n  \n}\n","import _ from 'lodash'\n\nexport default {\n  Pages: {\n    selectedPage: 'Data',\n    Data: {\n      search: '',\n      openFileBrowser: false,\n      uploading: {}\n    }\n  },\n  Modals: {\n    VerifiedModal: {\n      open: false,\n      showData: false,\n      data: ({}, state) => {\n        return state.app.verifyIntegrity.original\n      },\n      path: ({}, state) => {\n        return state.app.resourcePath\n      },\n      type:  ({}, state) => {\n        const type = _.get(state, 'app.original._type');\n        if (type == \"application/vnd.trellisfw.audit.sqfi.1+json\") return \"audit\";\n        if (type == \"application/vnd.trellisfw.coi.accord+json\") return \"coi\";\n      }\n    }\n  }\n}\n","import _state from './state'\nimport _actions from './actions'\n\n\nexport const state = _state;\nexport const actions = _actions;\n","import _ from 'lodash';\nimport uuid from 'uuid/v4';\nimport Promise from 'bluebird';\nexport default {\n  TopBar: {\n    logout({state, actions}) {\n      actions.login.logout()\n      actions.oada.logout();\n    }\n  },\n  Modals: {\n    VerifiedModal: {\n      toggleShowData({ state }, documentKey) {\n        state.view.Modals.VerifiedModal.showData = !state.view.Modals.VerifiedModal.showData;\n      },\n      close({state, actions}) {\n        //Close my window\n        state.view.Modals.VerifiedModal.open = false;\n      }\n    }\n  }\n}\n","import _state from './state'\nimport _actions from './actions'\n\n\nexport const state = _state;\nexport const actions = _actions;\n","import config from '../../config'\nexport default {\n  domain: config.oada && config.oada.url ? config.oada.url : '',\n}\n","export default {\n  async login({ state, actions }) {\n    state.login.loading = true;\n    state.oada.url = state.login.domain.match(/^http/) ? state.login.domain : 'https://'+state.login.domain;\n    await actions.oada.login();\n    state.login.loading = false;\n    if (state.oada.token) {\n      state.login.loggedIn = true;\n      const me = await actions.oada.get('/users/me');\n      state.login.name = me && me.data && me.data.username;\n    }\n  },\n  async logout({ state, actions }) {\n    await actions.oada.logout();\n    state.login.loggedIn = false;\n    state.app.finished = false;\n    await actions.app.processURL();\n  },\n  domainChange({ state }, data) {\n    state.login.domain = data.value;\n  }\n}\n","import { createHook } from \"overmind-react\"\n\nimport { namespaced } from 'overmind/config'\n\nimport * as app from './app'\nimport * as oada from './oada'\nimport * as view from './view'\nimport * as login from './login'\n\nexport const config = namespaced({\n  app,\n  oada,\n  view,\n  login\n})\n\n\nexport default createHook()\n","import React from 'react';\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport { Button, Dropdown } from 'semantic-ui-react'\nimport overmind from '../../overmind'\nimport config from '../../config';\n\n\nfunction TopBar() {\n  const { actions, state } = overmind();\n  const skin = state.app.skin;\n  return (\n    <div css={{\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      backgroundColor: '#fff',\n      minHeight: '85px',\n      borderBottom: '1px solid #979797'\n    }}>\n      <img css={{\n        height: '70px',\n        paddingLeft: '20px'\n      }} src={'logo.svg'} alt=\"logo\" />\n      <div css={{marginRight: 50}}>\n          <Dropdown text={state.login.name}>\n            <Dropdown.Menu>\n              <Dropdown.Item icon='power' text='Logout' value='logout' onClick={actions.view.TopBar.logout} />\n            </Dropdown.Menu>\n          </Dropdown>\n      </div>\n    </div>\n  );\n}\n\nexport default TopBar;\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport { Icon, Table } from 'semantic-ui-react'\n\nfunction Producer (props) {\n  const { coi } = props\n  const producer = (coi.producer && coi.producer.name) ? coi.producer.name : 'Unknown';\n  return (\n    <Table.Row>\n      <Table.Cell collapsing css={{fontWeight: 'bold'}}>\n        Producer\n      </Table.Cell>\n      <Table.Cell>{producer}</Table.Cell>\n    </Table.Row>\n  )\n}\n\nexport default Producer\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport { Icon, Table } from 'semantic-ui-react'\n\nfunction Holder (props) {\n  const { coi } = props\n  const holder = (coi.holder && coi.holder.name) ? coi.holder.name : 'Unknown';\n  return (\n    <Table.Row>\n      <Table.Cell collapsing css={{fontWeight: 'bold'}}>\n        Holder\n      </Table.Cell>\n      <Table.Cell>{holder}</Table.Cell>\n    </Table.Row>\n  )\n}\n\nexport default Holder\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport { Icon, Table } from 'semantic-ui-react'\nimport _ from 'lodash'\nimport moment from 'moment';\nimport Chip from '@material-ui/core/Chip'\nimport { Popup } from 'semantic-ui-react'\n\nfunction Scope (props) {\n  const { coi } = props\n  let policies = _.cloneDeep(coi.policies) || []; // COI has policies\n  // Filter policies whose dates we can't parse\n  policies = _.filter(policies, p => {\n    p.start = moment(p.effective_date);\n    p.end = moment(p.expire_date);\n    if (!p.start.isValid())  return false;\n    if (!p.end.isValid()) return false;\n    const now = moment();\n    p.expired = p.start.isAfter(now) || p.end.isBefore(now);\n    return true; // keep this one in the list\n  });\n  return (\n    <Table.Row>\n      <Table.Cell collapsing css={{fontWeight: 'bold'}}>\n        Policies\n      </Table.Cell>\n      <Table.Cell css={css`\n          .MuiChip-root {\n            font-family: inherit;\n            font-size: 14px;\n            line-height: 16px;\n            margin-left: 3px;\n            margin-top: 3px;\n          }\n          .MuiChip-root:first-of-type {\n            margin-left: 0px;\n          }\n        `}>\n        {\n          _.map(policies, (p, idx) => (\n            <Popup key={idx} content={\n              <div>\n                <div css={{textAlign: 'center'}}>{'Effective'}</div>\n                <div>{`${p.start.format('MMMM d, YYYY')} to ${p.end.format('MMMM d, YYYY')}`}</div>\n              </div>\n            } trigger={\n              <Chip color={(p.expired) ? 'secondary' : 'default'} label={`${p.number}${p.expired ? ': EXPIRED' : ''}`} />\n            } />\n          ))\n        }\n      </Table.Cell>\n    </Table.Row>\n  )\n}\n\nexport default Scope\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport { Table } from 'semantic-ui-react'\n\nimport Producer from './Producer'\nimport Holder from './Holder'\nimport Policies from './Policies'\n\nfunction CoI (props) {\n  const { coi, document } = props\n  return (\n    <Table celled striped  css={{maxWidth: 800}}>\n      <Table.Body css={{fontSize: 16}}>\n        <Producer coi={coi} />\n        <Holder coi={coi} />\n        <Policies coi={coi} />\n      </Table.Body>\n    </Table>\n  )\n}\n\nexport default CoI\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport { Icon, Table } from 'semantic-ui-react'\n\nfunction Organization (props) {\n  const { audit } = props\n  const org = (audit.organization && audit.organization.name) ? audit.organization.name : 'Unknown';\n  return (\n    <Table.Row>\n      <Table.Cell collapsing css={{fontWeight: 'bold'}}>\n        Organization\n      </Table.Cell>\n      <Table.Cell>{org}</Table.Cell>\n    </Table.Row>\n  )\n}\n\nexport default Organization\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport { Icon, Table } from 'semantic-ui-react'\nimport _ from 'lodash'\nimport Chip from '@material-ui/core/Chip'\n\nfunction Scope (props) {\n  const { audit } = props\n  return (\n    <Table.Row>\n      <Table.Cell collapsing css={{fontWeight: 'bold'}}>\n        Scope (Products)\n      </Table.Cell>\n      <Table.Cell css={css`\n          .MuiChip-root {\n            font-family: inherit;\n            font-size: 14px;\n            line-height: 16px;\n            margin-left: 3px;\n            margin-top: 3px;\n          }\n          .MuiChip-root:first-of-type {\n            margin-left: 0px;\n          }\n        `}>\n        {\n          _.map(audit.scope.products_observed, (p, idx) => (\n            <Chip key={idx} label={p.name} />\n          ))\n        }\n      </Table.Cell>\n    </Table.Row>\n  )\n}\n\nexport default Scope\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport { Icon, Table } from 'semantic-ui-react'\n\nfunction Score (props) {\n  const { audit } = props\n  return (\n    <Table.Row>\n      <Table.Cell collapsing css={{fontWeight: 'bold'}}>\n        Score\n      </Table.Cell>\n      <Table.Cell>\n      {\n        `${audit.score.final.value} `\n      }\n      {!audit.score.rating ? (\n        ''\n      ) : (\n        <span\n          style={{\n            color: audit.score.rating.match(/(good|excellent)/i)\n              ? 'green'\n              : 'red'\n          }}\n        >\n          ({audit.score.rating.trim()})\n        </span>\n      )}\n      </Table.Cell>\n    </Table.Row>\n  )\n}\n\nexport default Score\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport { Icon, Table } from 'semantic-ui-react'\nimport moment from 'moment';\n\nfunction Validity (props) {\n  const { audit } = props\n  let validity = null\n  if (\n    audit.certificate_validity_period &&\n    audit.certificate_validity_period.start &&\n    audit.certificate_validity_period.end\n  ) {\n    validity = {\n      start: moment(audit.certificate_validity_period.start, 'M/D/YYYY'),\n      end: moment(audit.certificate_validity_period.end, 'M/D/YYYY')\n    }\n    if (!validity.start || !validity.start.isValid()) validity = null\n    if (!validity.end || !validity.end.isValid()) validity = null\n    const now = moment()\n    // If it starts after today, or ended before today, it's expired\n    validity.expired = validity.start.isAfter(now) || validity.end.isBefore(now)\n  }\n  return (\n    <Table.Row>\n      <Table.Cell collapsing css={{fontWeight: 'bold'}}>\n        Validity\n      </Table.Cell>\n      <Table.Cell>\n      {\n        (!validity) ? '' :\n        (validity.expired) ?\n          <span style={{ color: 'red' }}>EXPIRED!</span>\n        :\n          <span style={{ color: 'green' }}>\n            {`VALID (from ${validity.start.format('MMM d, YYYY')} to ${validity.end.format('MMM d, YYYY')})`}\n          </span>\n      }</Table.Cell>\n    </Table.Row>\n  )\n}\n\nexport default Validity\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport { Table } from 'semantic-ui-react'\n\nimport Organization from './Organization'\nimport Scope from './Scope'\nimport Score from './Score'\nimport Validity from './Validity'\n\nfunction Audit (props) {\n  const { audit } = props\n  return (\n    <Table celled striped css={{maxWidth: 800}}>\n      <Table.Body css={{fontSize: 16}}>\n        <Organization audit={audit} />\n        <Score audit={audit} />\n        <Scope audit={audit} />\n        <Validity audit={audit} />\n      </Table.Body>\n    </Table>\n  )\n}\n\nexport default Audit\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport { Table } from 'semantic-ui-react'\n\nimport { Document, Page } from 'react-pdf';\n\n\nfunction PDF (props) {\n  //Get url and headers for getting access to pdf\n  const {oada, path} = props;\n  const httpHeaders = {Authorization: 'Bearer '+oada.token}\n  const url = `${oada.url}/${path}`\n  return (\n    <div>\n      <Document\n        file={\n          {\n            url,\n            httpHeaders\n          }\n        }\n        onLoadSuccess={({numPages}) => {}}>\n        <Page className={'pdfPage'} pageNumber={1} width={900} />\n      </Document>\n    </div>\n  )\n}\n\nexport default PDF\n","import React from 'react';\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core'\nimport overmind from '../../overmind'\nimport _ from 'lodash'\n\nimport CoI from './CoI'\nimport Audit from './Audit'\nimport PDF from './PDF'\nimport ReactJson from 'react-json-view'\nimport { Button } from 'semantic-ui-react'\n\nfunction Content() {\n  const { actions, state } = overmind()\n  const original = state.app.original || {};\n  const doc = state.app.originalVdoc || {};\n\n  var jsonData = null\n  if (original) {\n    jsonData = _.cloneDeep(original)\n    if (jsonData._id) delete jsonData._id\n    if (jsonData._rev) delete jsonData._rev\n    if (jsonData._type) delete jsonData._type\n    if (jsonData._meta) delete jsonData._meta\n  }\n\n  return (\n    <div css={{\n      display: 'flex',\n      flexDirection: 'column',\n      flex: '1',\n      boxShadow: 'inset 5px 5px 5px #dddddd',\n      padding: 10,\n      alignItems: 'center'\n    }}>\n      <div css={{height: 20}}/>\n      {\n        (!state.app.maskedResourceURL) ? null :\n        (state.app.valid) ?\n        <div css={{fontSize: 25, color: 'green' }}>\n          {'Integrity of document verified.'}\n        </div>\n        :\n        <div css={{fontSize: 25, color: 'red' }}>\n          {'Could not verify document integrity.'}\n        </div>\n      }\n      <div css={{height: 10}}/>\n      {\n        original._type == \"application/vnd.trellisfw.audit.sqfi.1+json\" ? <Audit audit={original} /> : null\n      }\n      {\n        original._type == \"application/vnd.trellisfw.coi.accord+json\" ? <CoI coi={original} /> : null\n      }\n      {\n        doc.pdf ? <PDF oada={state.oada} path={`${doc.pdf._id}`} /> : null\n      }\n      {\n        (!state.app.showData) ? null :\n        <ReactJson\n          src={jsonData}\n          name={'data'}\n          collapsed={1}\n          collapseStringsAfterLength={50}\n          displayDataTypes={false}\n          displayObjectSize={false}\n          enableClipboard={false}\n        />\n      }\n      {\n        <Button onClick={() => {actions.app.toggleShowData()}}>\n          {(state.app.showData) ? 'Hide Data' : 'View Data'}\n        </Button>\n      }\n    </div>\n  );\n}\n\nexport default Content;\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\n\nimport { Header } from 'semantic-ui-react'\nimport overmind from '../../../overmind'\nimport _ from 'lodash'\nimport { Button, Icon } from 'semantic-ui-react'\n\nfunction MyHeader (props) {\n  const { state, actions } = overmind()\n  const myState = state.view.Modals.VerifiedModal\n  const myActions = actions.view.Modals.VerifiedModal\n  return (\n    <Header>\n      <div css={{display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>\n        { (state.app.valid) ?\n          <div css={{fontSize: 25, color: 'green' }}>\n            {'Data Integrity Verified'}\n          </div>\n          :\n          <div css={{fontSize: 25, color: 'red' }}>\n            {'WARNING: Could not verify data integrity!'}\n          </div>\n        }\n        <Button icon onClick={()=>myActions.close()}>\n          <Icon name='x' />\n        </Button>\n      </div>\n    </Header>\n  )\n}\n\nexport default MyHeader\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport { Icon, Table } from 'semantic-ui-react'\n\nfunction Location (props) {\n  const { data } = props\n  return (\n    <Table.Row>\n      <Table.Cell collapsing css={{fontWeight: 'bold'}}>\n        Organization Location\n      </Table.Cell>\n      <Table.Cell>\n        <div>{data.street_address}</div>\n        <div>{`${data.city}, ${data.state} ${data.postal_code}`}</div>\n        <div>{data.country}</div>\n      </Table.Cell>\n    </Table.Row>\n  )\n}\n\nexport default Location\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport { Icon, Table } from 'semantic-ui-react'\n\nfunction Location (props) {\n  const { data } = props\n  return (\n    <Table.Row>\n      <Table.Cell collapsing css={{fontWeight: 'bold'}}>\n        Scope Operation Location\n      </Table.Cell>\n      <Table.Cell>\n        <div>{data.address}</div>\n        <div>{`${data.city}, ${data.state} ${data.postal_code}`}</div>\n        <div>{data.country}</div>\n      </Table.Cell>\n    </Table.Row>\n  )\n}\n\nexport default Location\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport { Table } from 'semantic-ui-react'\n\nimport OrgLocation from './OrgLocation'\nimport ScopeLocation from './ScopeLocation'\n\nfunction Audit (props) {\n  const { data, path } = props;\n  return (\n    <Table definition>\n      <Table.Body css={{fontSize: 16}}>\n        {(path == 'organization/location') ? <OrgLocation data={data} /> : null}\n        {(path == 'scope/operation/location') ? <ScopeLocation data={data} /> : null}\n      </Table.Body>\n    </Table>\n  )\n}\n\nexport default Audit\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport { Icon, Table } from 'semantic-ui-react'\n\nfunction Location (props) {\n  const { data, title } = props\n  return (\n    <Table.Row>\n      <Table.Cell collapsing css={{fontWeight: 'bold'}}>\n        {title}\n      </Table.Cell>\n      <Table.Cell>\n        <div>{data.street_address}</div>\n        <div>{`${data.city}, ${data.state} ${data.postal_code}`}</div>\n        <div>{data.country}</div>\n      </Table.Cell>\n    </Table.Row>\n  )\n}\n\nexport default Location\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport { Table } from 'semantic-ui-react'\n\nimport Location from './Location'\n\nfunction CoI (props) {\n  const { data, path } = props;\n  return (\n    <Table definition>\n      <Table.Body css={{fontSize: 16}}>\n        {(path == 'producer/location') ? <Location title='Producer Location' data={data} /> : null}\n        {(path == 'holder/location') ? <Location title='Holder Location' data={data} /> : null}\n        {(path == 'insured/location') ? <Location title='Insured Location' data={data} /> : null}\n      </Table.Body>\n    </Table>\n  )\n}\n\nexport default CoI\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\n\nimport overmind from '../../../overmind'\nimport _ from 'lodash'\nimport moment from 'moment'\nimport ReactJson from 'react-json-view'\nimport Audit from './Audit'\nimport CoI from './CoI'\n\nimport { Button } from 'semantic-ui-react'\n\nfunction Content (props) {\n  const { actions, state } = overmind()\n  const myActions = actions.view.Modals.VerifiedModal\n  const myState = state.view.Modals.VerifiedModal\n\n  var jsonData = null\n  var jsonTitle = myState.path;\n  if (myState.data) {\n    jsonData = _.cloneDeep(myState.data)\n    if (jsonData._id) delete jsonData._id\n    if (jsonData._rev) delete jsonData._rev\n    if (jsonData._type) delete jsonData._type\n    if (jsonData._meta) delete jsonData._meta\n  }\n\n  return (\n    <div>\n      <div\n        css={{\n          color: '#2439FF',\n          fontSize: 16,\n          marginBottom: 7,\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center'\n        }}\n      >\n        {\n          (myState.type == \"audit\") ? <Audit data={myState.data} path={myState.path} /> : null\n        }\n        {\n          (myState.type == \"coi\") ? <CoI data={myState.data} path={myState.path} /> : null\n        }\n        {!myState.showData ? (\n          ''\n        ) : jsonData == null ? (\n          <span>&lt; No Data &gt;</span>\n        ) : (\n          <ReactJson\n            src={jsonData}\n            name={jsonTitle}\n            collapsed={1}\n            collapseStringsAfterLength={50}\n            displayDataTypes={false}\n            displayObjectSize={false}\n            enableClipboard={false}\n          />\n        )}\n        <div css={{display: 'flex'}}>\n          <Button onClick={() => {myActions.toggleShowData(_.get(myState, 'documentKey'))}}>\n            {(myState.showData) ? 'Hide Data' : 'View Data'}\n          </Button>\n          <div css={{width: 40}}/>\n          <Button onClick={() => {myActions.close()}}>Close</Button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Content\n","import React from 'react'\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\n\nimport { Modal } from 'semantic-ui-react'\nimport overmind from '../../../overmind'\n\nimport Header from './Header';\nimport Content from './Content';\n\nfunction VerifiedModal(props) {\n  const { actions, state } = overmind();\n  const myActions = actions.view.Modals.VerifiedModal;\n  const myState = state.view.Modals.VerifiedModal;\n  return (\n    <Modal open={myState.open} onClose={myActions.close}>\n      <Header />\n      <Modal.Content >\n        <div css={{display: 'flex', flexDirection: 'column', justifyContent: 'space-between'}}>\n          <Content />\n        </div>\n      </Modal.Content>\n    </Modal>\n  );\n}\n\nexport default VerifiedModal\n","import React from 'react';\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\nimport _ from 'lodash'\nimport overmind from '../overmind'\nimport { Input, Button, Form, Dropdown } from 'semantic-ui-react'\nimport 'semantic-ui-css/semantic.min.css'\nimport config from '../config';\n\nfunction Login() {\n  const { state, actions } = overmind();\n  const appState = state.app;\n  const myState = state.login;\n  const myActions = actions.login;\n  return (\n    <div css={css`\n      height: 100vh;\n      width: 100vw;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n    `}>\n    <img css={{\n      height: 100,\n      marginBottom: 25\n    }} src={`logo.svg`} alt=\"logo\" />\n    <img css={{\n      height: 100,\n      marginBottom: 25\n    }} src={`magnify.svg`} alt=\"logo\" />\n    <div css={{fontSize: 20, paddingBottom: 100}}>{'Verifying your data...'}</div>\n    <a css={css`\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        font-size: 1.2em;\n        color: #FFFFFF;\n        cursor: pointer;\n      `}\n      onClick={myActions.logout}>\n      Logout\n    </a>\n    </div>\n  );\n}\n\nexport default Login;\n","import React from 'react';\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core'\n\nimport overmind from './overmind'\n\nimport TopBar from './view/TopBar';\nimport Content from './view/Content';\nimport VerifiedModal from './view/Modals/VerifiedModal';\nimport Login from './Login';\n\nfunction App() {\n  const { state, actions } = overmind();\n  if (!state.app.finished) {\n    return <Login />\n  }\n  return (\n    <div css={{\n      height: '100vh',\n      width: '100vw',\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'stretch'\n    }}>\n\n      <TopBar />\n      <div css={{\n        flex: 1,\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'stretch'\n      }}>\n        <Content />\n        <VerifiedModal />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { createOvermind } from \"overmind\";\nimport { Provider } from \"overmind-react\";\nimport { config } from './overmind'\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst app = createOvermind(config,\n{\n    devtools: true,\n});\n\nReactDOM.render(\n  <Provider value={app}>\n    <App />\n  </Provider>\n, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}